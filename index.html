<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Parent Quiz</title>
<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f7f7f7; }
    .container { max-width: 480px; margin: auto; background: #fff; padding: 20px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    h2 { text-align: center; }
    .question { margin-bottom: 20px; }
    .progress { height: 10px; background: #ddd; border-radius: 20px; overflow: hidden; margin-bottom: 20px; }
    .progress-bar { width: 0%; height: 100%; background: #4caf50; transition: width 0.3s; }
    button { width: 100%; padding: 12px; background: #4caf50; color: #fff; border: none; border-radius: 10px; font-size: 16px; cursor: pointer; }
    button:hover { background: #45a049; }
    #overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; }
    #popup { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:25px; border-radius:16px; max-width:350px; text-align:center; display:none; box-shadow:0 0 15px rgba(0,0,0,0.3); }
    input[type="text"] { width:100%; padding:10px; border:1px solid #ccc; border-radius:8px; margin-bottom:15px; }
</style>
</head>
<body>

<div class="container">
    <h2>Parent Quiz</h2>

    <div class="progress">
        <div class="progress-bar" id="progress"></div>
    </div>

    <form id="quizForm">

        <p><strong>Your Name (Parent):</strong></p>
        <input type="text" id="parentName" placeholder="Enter your full name" required>

        <div class="question">
            <p><strong>1. How often does your child read at home?</strong></p>
            <label><input type="radio" name="q1" value="1"> Rarely</label><br>
            <label><input type="radio" name="q1" value="2"> Sometimes</label><br>
            <label><input type="radio" name="q1" value="3"> Often</label>
        </div>

        <div class="question">
            <p><strong>2. How comfortable is your child with homework?</strong></p>
            <label><input type="radio" name="q2" value="1"> Struggles a lot</label><br>
            <label><input type="radio" name="q2" value="2"> Needs help sometimes</label><br>
            <label><input type="radio" name="q2" value="3"> Independent</label>
        </div>

        <button type="button" onclick="submitQuiz()">Submit</button>
    </form>
</div>

<div id="overlay"></div>
<div id="popup">
    <h3>Your Result</h3>
    <p id="resultMsg"></p>
    <button onclick="closePopup()">Close</button>
</div>

<script>
    const form = document.getElementById("quizForm");
    const progressBar = document.getElementById("progress");

    form.addEventListener("change", () => {
        const answered = Array.from(new FormData(form).entries()).length - 1; 
        const total = 2;
        progressBar.style.width = (answered / total) * 100 + "%";
    });

    function submitQuiz() {
        const data = new FormData(form);
        const name = document.getElementById("parentName").value;

        if (!name) { alert("Please enter your name."); return; }
        if (Array.from(data.entries()).length < 3) { alert("Please answer all questions."); return; }

        let score = 0;
        data.forEach((value, key) => {
            if (key !== "parentName") score += Number(value);
        });

        let msg = "";
        if (score <= 2) msg = "Your child may need extra support.";
        else if (score <= 4) msg = "Your child is doing fairly well.";
        else msg = "Your child is doing excellently!";

        // SEND TO GOOGLE SHEET
        fetch("https://script.google.com/macros/s/AKfycbwbrRNILcjO4WGyiVxVYel_F47YtxPGiJ0Jgfa4HUYxJr2Jpf2I-6FVuyhoxXMS-vAvLA/exec", {
            method: "POST",
            body: JSON.stringify({
                name: name,
                score: score,
                result: msg
            })
        });

        document.getElementById("resultMsg").textContent = msg;
        document.getElementById("overlay").style.display = "block";
        document.getElementById("popup").style.display = "block";
    }

    function closePopup() {
        document.getElementById("overlay").style.display = "none";
        document.getElementById("popup").style.display = "none";
    }
</script>

</body>
</html>
